<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="robothots.css"/>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://static.robotwebtools.org/roslibjs/current/roslib.min.js"></script>
    <script src="https://static.robotwebtools.org/EventEmitter2/current/eventemitter2.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
  </head>
  <body>
    <div class="container-fluid">
      <div class="row" id="header">
        <div class="col-2" id="title">
          <span>RoboThots</span>
        </div>
        <div class="col-8"></div>
        <div class="col-2 text-center">
          <img id= "logo" src="LogoWave.jpg" alt="logo"></img>
        </div>
      </div>
      <div id = "content" class="row">
        <div class="col-md-8" id="video_container">
          <img src="" alt="" id="video"/>
        </div>
        <div id = "list_container">
          <div class="tab col-md-3">
            <button class="tablinks" onclick="openStats(event, 'Position')">Position</button>
            <button class="tablinks" onclick="openStats(event, 'Acceleration')">Acceleration</button>
            <button class="tablinks" onclick="openStats(event, 'Task')">Task</button>
            <button class="tablinks" onclick="openStats(event, 'Rosout')">Rosout</button>
          </div>
          <div id = "tab_display"class="col-md-9">
            <div id = "Position" class = "tabcontent">
              <h3>Position Stats</h3>
              <p>Unordered list of stats goes here</p>
            </div>
            <div id = "Acceleration" class = "tabcontent">
              <h3>Acceleration Stats</h3>
              <p>Unordered list of stats goes here</p>
            </div>
            <div id = "Task" class = "tabcontent">
              <h3>Task Stats</h3>
              <p>Unordered list of stats goes here</p>
            </div>
            <div id = "Rosout" class = "tabcontent">
              <h3>Rosout Stats</h3>
              <p>Unordered list of stats goes here</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    
  </body>
  <script>
    var robot_IP;
    var ros;
    window.onload = function(){
      //Setup Code. Robot IP self explainable, ros is the rosbridge that allows
      //Topics to be subscribed to after roslaunch rosbridge_server rosbridge_websocket.launch is run
      robot_IP = "127.0.0.1";
      ros = new ROSLIB.Ros({
        url: "ws://" + robot_IP + ":9090"
      });
      
      
      //Video socket connection established here, rosrun web_video_server web_video_server
      //Has to be called before webpage open
      video = document.getElementById('video');
      video.src = "http://" + robot_IP + ":8080/stream?topic=/camera/image_raw&type=mjpeg&quality=80&image_trasport=compressed";
      
      //Subscriber Topic
      
      var listener = new ROSLIB.Topic({
        ros : ros,
        name : '/rosout_agg',
        messageType : 'rosgraph_msgs/Log'
      });
      listener.subscribe(function(message){
        console.log(message);
      });
      IMU_message = new ROSLIB.Topic({
        ros:ros,
        name : 'state/imu',
        messageType : 'riptide_msgs/Imu'
    });
    
    IMU_message.subscribe(function(message){
        console.log('Recieved message on ' +IMU_message.name + ': ' + message.data);
    });
      
      
    }
    function openStats(evt, cityName) {
    // Declare all variables
    var i, tabcontent, tablinks;

    // Get all elements with class="tabcontent" and hide them
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }

    // Get all elements with class="tablinks" and remove the class "active"
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
    }

    // Show the current tab, and add an "active" class to the link that opened the tab
    document.getElementById(cityName).style.display = "block";
    evt.currentTarget.className += " active";
    } 
    
    
  </script>
</html>