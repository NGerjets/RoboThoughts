<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="robothots.css"/>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://static.robotwebtools.org/roslibjs/current/roslib.min.js"></script>
    <script src="https://static.robotwebtools.org/EventEmitter2/current/eventemitter2.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
  </head>
  <body>
    <div class="container-fluid">
      <div class="row" id="header">
        <div class="col-2" id="title">
          <span>RoboThots</span>
        </div>
        <div class="col-8"></div>
        <div class="col-2 text-center">
          <img id= "logo" src="LogoWave.jpg" alt="logo"></img>
        </div>
      </div>
      <div id = "content" class="row">
        <div class="col-md-8" id="video_container">
          <img src="" alt="" id="video"/>
        </div>
        <div id = "list_container" class="col-md-4">
          <ul id = "stats">
            <li>Fake data</li>
            <li>More Fake Data</li>
            <li>And More Fake Data </li>
            <li>Last Fake Data</li>
            <li>JK This is the last one</li>
          </ul>
        </div>
      </div>
    </div>
  </body>
  <script>
    var robot_IP;
    var ros;
    window.onload = function(){
      //Setup Code. Robot IP self explainable, ros is the rosbridge that allows
      //Topics to be subscribed to after roslaunch rosbridge_server rosbridge_websocket.launch is run
      robot_IP = "127.0.0.1";
      ros = new ROSLIB.Ros({
        url: "ws://" + robot_IP + ":9090"
      });
      
      
      //Video socket connection established here, rosrun web_video_server web_video_server
      //Has to be called before webpage open
      video = document.getElementById('video');
      video.src = "http://" + robot_IP + ":8080/stream?topic=/camera/image_raw&type=mjpeg&quality=80&image_trasport=compressed";
      
      //Subscriber Topic
      
      var listener = new ROSLIB.Topic({
        ros : ros,
        name : '/rosout_agg',
        messageType : 'rosgraph_msgs/Log'
      });
      listener.subscribe(function(message){
        console.log(message);
      });
      IMU_message = new ROSLIB.Topic({
        ros:ros,
        name : 'state/imu',
        messageType : 'riptide_msgs/Imu'
    });
    
    IMU_message.subscribe(function(message){
        console.log('Recieved message on ' +IMU_message.name + ': ' + message.data);
    });
      
    }
    
    
  </script>
</html>